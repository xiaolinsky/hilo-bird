/**
 * Hilo 1.6.0 for standalone
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
!function(o){function e(o){var e,n,r=/\/?[^\/]+\.(\w+)(\?\S+)?$/i;return(e=o.match(r))&&(n=e[1].toLowerCase()),n||null}o.Hilo||(o.Hilo={});var n=o.Hilo.Class,r=o.Hilo.EventMixin,t=o.Hilo.ImageLoader,i=o.Hilo.ScriptLoader,a=n.create({Mixes:r,constructor:function(o){this._source=[],this.add(o)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(o){var e=this;return o&&(o=o instanceof Array?o:[o],e._source=e._source.concat(o)),e},get:function(o){if(o)for(var e=this._source,n=0;n<e.length;n++){var r=e[n];if(r.id===o||r.src===o)return r}return null},getContent:function(o){var e=this.get(o);return e&&e.content},removeContent:function(o){if(o)for(var e=this._source,n=0;n<e.length;n++){var r=e[n];if(r.id===o||r.src===o)return void e.splice(n,1)}},start:function(){var o=this;return o._loadNext(),o},_loadNext:function(){var o=this,e=o._source,n=e.length;if(o._loaded>=n)return void o.fire("complete");if(o._currentIndex<n-1&&o._connections<o.maxConnections){var r=++o._currentIndex,t=e[r],i=o._getLoader(t);if(i){var a=i.onLoad,c=i.onError;i.onLoad=function(e){i.onLoad=a,i.onError=c;var n=a&&a.call(i,e)||e.target;o._onItemLoad(r,n)},i.onError=function(e){i.onLoad=a,i.onError=c,c&&c.call(i,e),o._onItemError(r,e)},o._connections++}o._loadNext(),i&&i.load(t)}},_getLoader:function(o){var n=o.loader;if(n)return n;var r=o.type||e(o.src);switch(r){case"png":case"jpg":case"jpeg":case"gif":case"webp":n=new t;break;case"js":case"jsonp":n=new i}return n},_onItemLoad:function(o,e){var n=this,r=n._source[o];r.loaded=!0,r.content=e,n._connections--,n._loaded++,n.fire("load",r),n._loadNext()},_onItemError:function(o,e){var n=this,r=n._source[o];r.error=e,n._connections--,n._loaded++,n.fire("error",r),n._loadNext()},getSize:function(o){for(var e=0,n=this._source,r=0;r<n.length;r++){var t=n[r];e+=(o?t.loaded&&t.size:t.size)||0}return e},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});o.Hilo.LoadQueue=a}(window);